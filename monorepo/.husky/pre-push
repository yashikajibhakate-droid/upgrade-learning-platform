#!/bin/sh
. "$(dirname "$0")/_/husky.sh"

echo "ğŸ›¡ï¸  Running Pre-push Checks..."

# Frontend Tests
echo "ğŸŸ¢ Running Frontend Tests..."
cd frontend
npm run test
FRONTEND_EXIT_CODE=$?
cd ..

if [ $FRONTEND_EXIT_CODE -ne 0 ]; then
  echo "âŒ Frontend tests failed. Push aborted."
  exit 1
fi

# Backend Tests
echo "ğŸŸ¢ Running Backend Tests..."
cd backend
./gradlew test
BACKEND_EXIT_CODE=$?
cd ..

if [ $BACKEND_EXIT_CODE -ne 0 ]; then
  echo "âŒ Backend tests failed. Push aborted."
  exit 1
fi

echo "âœ… All checks passed. Pushing..."
